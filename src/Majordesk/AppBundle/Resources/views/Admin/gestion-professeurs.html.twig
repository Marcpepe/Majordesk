{% extends "MajordeskAppBundle:Admin:admin.html.twig" %}

{% block title %}
	Gestion des professeurs - {{ parent() }}
{% endblock %}

{% block navbar %}
	<li><a><i class="icon-angle-right"></i> Gestion des professeurs</a></li>
{% endblock %}
 
{% block admin %}
				<span class="visible-md"><br></span>
				<span class="visible-lg"><br></span>
				<h3><i class="icon-user-md icon-large text-red pull-left"></i> <p class="pull-left">Gestion des professeurs</p></h3>
					<div class="col-lg-7 pull-right">	
						
						{% if filter_eleve is defined %}
							<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs') }}">Filtre élève <i class="icon-remove-sign"></i> </a>
						{% endif %}
						
						{% if filter_lu is defined %}
							{% if filter_lu == 1 %}
								<a class="btn btn-success" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : 0, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Lu <i class="icon-remove-sign"></i> </a>
							{% else %}
								<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : 1, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Lu <i class="icon-ok-circle"></i> </a>
							{% endif %}
						{% endif %}
						
						{% if filter_ma is defined %}
							{% if filter_ma == 1 %}
								<a class="btn btn-success" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : 0, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Ma <i class="icon-remove-sign"></i> </a>
							{% else %}
								<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : 1, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Ma <i class="icon-ok-circle"></i> </a>
							{% endif %}
						{% endif %}
						
						{% if filter_me is defined %}
							{% if filter_me == 1 %}
								<a class="btn btn-success" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : 0, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Me <i class="icon-remove-sign"></i> </a>
							{% else %}
								<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : 1, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Me <i class="icon-ok-circle"></i> </a>
							{% endif %}
						{% endif %}
						
						{% if filter_je is defined %}
							{% if filter_je == 1 %}
								<a class="btn btn-success" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : 0, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Je <i class="icon-remove-sign"></i> </a>
							{% else %}
								<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : 1, 've' : filter_ve, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Je <i class="icon-ok-circle"></i> </a>
							{% endif %}
						{% endif %}
						
						{% if filter_ve is defined %}
							{% if filter_ve == 1 %}
								<a class="btn btn-success" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : 0, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Ve <i class="icon-remove-sign"></i> </a>
							{% else %}
								<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : 1, 'sa' : filter_sa, 'di' : filter_di
								}) }}">Ve <i class="icon-ok-circle"></i> </a>
							{% endif %}
						{% endif %}
						
						{% if filter_sa is defined %}
							{% if filter_sa == 1 %}
								<a class="btn btn-success" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : 0, 'di' : filter_di
								}) }}">Sa <i class="icon-remove-sign"></i> </a>
							{% else %}
								<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : 1, 'di' : filter_di
								}) }}">Sa <i class="icon-ok-circle"></i> </a>
							{% endif %}
						{% endif %}
						
						{% if filter_di is defined %}
							{% if filter_di == 1 %}
								<a class="btn btn-success" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : 0
								}) }}">Di <i class="icon-remove-sign"></i> </a>
							{% else %}
								<a class="btn btn-default" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : filter_lu, 'ma' : filter_ma, 'me' : filter_me, 'je' : filter_je, 've' : filter_ve, 'sa' : filter_sa, 'di' : 1
								}) }}">Di <i class="icon-ok-circle"></i> </a>
							{% endif %}
						{% endif %}
						
						{% if filter_lu is defined %}
								<a class="btn btn-primary" href="{{ path('majordesk_app_gestion_professeurs') }}"><i class="icon-signout"></i> </a>
						{% endif %}
						
						<div class="btn-group pull-right">						
						  {% if filter_lu is not defined %}
								<a  rel="fix-tooltip" data-title="Filtrer par disponibilités" class="btn btn-primary" href="{{ path('majordesk_app_gestion_professeurs_filter_disponibilites', { 
								'lu' : 0, 'ma' : 0, 'me' : 0, 'je' : 0, 've' : 0, 'sa' : 0, 'di' : 0
								}) }}"><i class="icon-caret-left"></i> <i class="icon-time"></i> </a>
						  {% endif %}
							    <a rel="fix-tooltip" data-title="Ajouter un professeur" class="btn btn-info" href="{{ path('majordesk_app_ajouter_professeur') }}"><i class="icon-user-md"></i> <i class="icon-plus"></i></a>
						</div>
					</div>
					<br><br>
					<div id="actif-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					  <div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h3><i class="icon-warning-sign icon-large text-yellow"></i> Confirmation</h3>
					  </div>
					  <div class="modal-body">
						<p><i class="icon-ban-circle icon-large text-red"></i> Bloquer/Débloquer ce professeur ?</p>
					  </div>
					  <div class="modal-footer">
						<button class="btn" data-dismiss="modal" aria-hidden="true"><i class="icon-angle-left"></i> Annuler</button>
						<button class="btn btn-primary" data-dismiss="modal" id="actif">Confirmer</a>
					  </div>
					</div>
				
				<br>
				<div class="table-responsive">
					<table class="table table-bordered table-hover">
						<thead>
						<tr>
						  <th>#</th>
						  <th>Prenom <i class="icon-caret-down pull-right icon-table-position"></i></th>
						  <th>Nom <i class="icon-caret-down pull-right icon-table-position"></i></th>
						  <th>Hrs données <i class="icon-caret-down pull-right icon-table-position"></i></th>
						  <th>Nbr d'élèves <i class="icon-caret-down pull-right icon-table-position"></i></th>
						  <th>Disponibilités <i class="icon-time pull-right icon-table-position"></i></th>
						  <th>N° SS</th>
						  <th>RIB</th>
						  <th>Flag</th>
						  <th>Bloqué</th>
						  <th></th>
						</tr>
					  </thead>
					  <tbody>
						{% for professeur in professeurs %}
						<tr
						{% if professeur.flag %}
							class="warning"
						{% endif %}
						 data-id="{{ professeur.id }}">
						
						  <td>{{ professeur.id }}</td>
						  <td>{{ professeur.username }}</td>
						  <td>{{ professeur.nom }}</td>
						  <td>{{ professeur.heuresDonnees / 10 }}</td>
						  <td>{{ professeur.eleves|length }}</td>
						  <td>
							{% for disponibilite in disponibilites if disponibilite.professeur != null %}
								{% if disponibilite.professeur.id == professeur.id %}
									{% if disponibilite.actif == '0' %}
										<del>{{ disponibilite.jour[:2] }}</del>
									{% elseif disponibilite.actif == '1' %}
										<span class="text-green"><strong>{{ disponibilite.jour[:2] }}</strong></span>
									{% elseif disponibilite.actif == '2' %}
										<span class="text-orange"><strong>{{ disponibilite.jour[:2] }}</strong></span>
									{% elseif disponibilite.actif == '3' %}
										<span class="text-red"><strong>{{ disponibilite.jour[:2] }}</strong></span>
									{% endif %}
								{% endif %}
							{% endfor %}
						  </td>
						  <td>
							{% if professeur.securiteSociale != null %}
								<i class="icon-ok"></i>
							{% endif %}
						  </td>
						  <td>
							{% if professeur.rib != null %}
								<i class="icon-ok"></i>
							{% endif %}
						  </td>
						  <td>
							{% if professeur.flag %}
								<i class="icon-flag icon-large text-yellow"></i>
							{% else %}	
								 - 
							{% endif %}
						  </td>
						  <td
							{% if professeur.actif %}
								class="actif"
							{% endif %}
						  >
							{% if professeur.actif %}
								 - 
							{% else %}	
								<i class="icon-ban-circle icon-large text-red"></i>
							{% endif %}
						  </td>
						  <td>
							<div class="btn-group">
							  <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="#">
								<i class="icon-cogs"></i> 
								<span class="caret"></span>
							  </a>
							  <ul class="dropdown-menu">
								  <li><a tabindex="-1" href="{{ path('majordesk_app_profil_professeur', {'id' : professeur.id} ) }}"><i class="icon-plus"></i> Profil complet</a></li>
								  <li><a tabindex="-1" href="{{ path('majordesk_app_gestion_eleves_filter_professeur', {'id' : professeur.id} ) }}"><i class="icon-group"></i> Liste des élèves</a></li>
								  <li>
									<a tabindex="-1" class="cursor flag"><i class="icon-flag"></i> 
										{% if professeur.flag %}
											 Retirer le flag de ce professeur
										{% else %}	
											 Mettre un flag sur ce professeur
										{% endif %}
									</a>
								  </li>
								  <li>
									<a tabindex="-1" class="cursor actif"><i class="icon-ban-circle"></i> 
										{% if professeur.actif %}
											Bloquer ce professeur
										{% else %}
											Débloquer ce professeur
										{% endif %}
									</a>
								  </li>
								  <li class="divider"></li>
								  <li><a tabindex="-1" class="cursor"><i class="icon-trash"></i> Supprimer ce professeur</a></li>
							  </ul>
							</div>
						  </td>
						</tr>
						{% endfor %}
					  </tbody>
					</table>
				</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}	
	{% javascripts filter='yui_js' output='js/13112713.js' 
		'@MajordeskAppBundle/app/Resources/js/admin/gestion-professeurs.js'
	%}
		<script type="text/javascript" src="{{ asset_url }}"></script>
	{% endjavascripts %}
{% endblock %}